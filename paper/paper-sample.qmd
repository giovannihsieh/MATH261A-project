---
title: "NFL Offensive Play Balance Importance for Wins"
subtitle: "Data from 1999-2022"
author: "Giovanni Hsieh"
thanks: "Project repository available at: [https://github.com/giovannihsieh/MATH261A-project](https://github.com/giovannihsieh/MATH261A-project)."
date: today
date-format: long
abstract: "Abstract here."
format: pdf
bibliography: references.bib
number-sections: true
---

```{r}
#| include: false
#| warning: false
#| message: false
# load libraries
library(tidyverse)
library(palmerpenguins)
library(ggpubr)
library(patchwork)
```

# Introduction

  I wanted to look at the question of whether having a balanced offense between both passing and rushing is important for winning games. As the NFL has become more and more pass heavy in pursuit of higher entertainment value and higher profits, I wanted to see if relying on a pass heavy offense is a viable strategy in the NFL.
  The answer to this question could have many implications. If pass heavy offenses are the future of the NFL, positions that are more important for passing (QB, WR, LT) may become more desirable and more of a focus for teams in the draft and offseason. Positions that are more traditionally involved in the run offense (RB, OG) may see lower salaries and draft priority.
  We expect that there should be a positive correlation between offense balance and score differential because having a balanced offense makes a team's offense less predictable for the defense. This would increase the chance for a team to generate offensive success if the defense has to prepare for both a passing and rushing offense.
  @sec-data introduces the data used in this analysis. @sec-methods describes the model used. @sec-results discusses the analysis of the results and conclusions that can be drawn. @sec-discussion discusses potential strengths and weaknesses of the analysis, and some future steps.

# Data {#sec-data}
```{r fig-offense-balance-scatter}
#| echo: false
#| warning: false
#| message: false
#| fig-cap: "Scatter plot of pass/run play ratio (x-axis) and total wins (y-axis) with fitted linear regression model."

# read in nfl data
nfl_data <- read_csv("../data/nfl-team-statistics.csv")

# calculate offense and defense strength
nfl_data <- nfl_data |>
  mutate(
    offense_balance = offense_n_plays_run / offense_n_plays_pass
  )

# plot
ggplot(nfl_data, aes(x = offense_balance, y = score_differential)) +
  geom_point() +
  geom_smooth(method = "lm", se = FALSE) +
  stat_regline_equation(label.x = 1.25, label.y = 300) +
  theme_pubr() +
  ylab("Score Differential") +
  xlab("Pass-to-Run Play Ratio") +
  ggtitle("Relationship Between Offensive Play Balance\nand Total Wins")
```

The `nfl-team-statistics` dataset [@palmer_penguins] provides data about the regular season performance for each NFL team from 1999 to 2022. Each row in the dataset corresponds to a single NFL team in a single regular season and includes information about wins, losses, score differential, and various offensive and defensive metrics. My analysis focuses on the offense play balance represented by the ratio between the number of run plays and pass plays a team ran in a given season.

@fig-offense-balance-scatter indicates a weak positive linear association between offense play balance and score differential...

# Methods {#sec-methods}

I fit the simple linear regression model...

$$Y_i = \beta_0 +\beta_1 X_i + \varepsilon_i$$


In this model, $\beta_1$ represents...

I implemented this analysis using the R programming language [@R_language]...


# Results {#sec-results}
```{r offense-balance-lm}
#| echo: false
#| warning: false
#| message: false
lm_fit <- lm(offense_balance ~ score_differential, data = nfl_data)
```

The estimated slope parameter is $b_1=$ `r round(coefficients(lm_fit)[2], 3)`. In other words, for each millimeter increase in flipper length, the expected change in...

The estimated intercept is ....




```{r fig-offense-balance-residual}
#| echo: false
#| warning: false
#| message: false
#| fig-cap: "Scatter plot of fitted values (x-axis) and residuals (y-axis) for a simple linear regression with body mass (g) as the response and flipper length (mm) as the predictor."
plot_dat <- data.frame(
  resid = resid(lm_fit),
  fitted = fitted(lm_fit)
)
ggplot(plot_dat, aes(x = fitted, y = resid)) +
  geom_point() +
  geom_hline(yintercept = 0, linetype = "dashed") +
  theme_pubr() +
  ylab("Residual (observed - fitted)") +
  xlab("Fitted value") +
  ggtitle("Residuals vs. fitted value plot")
```

I use a two-sided t-test to compare the null hypothesis $\beta_1=0$ with the two-sided alternative hypothesis $\beta_1\not=0$. In order for this test to be valid, we require that... @fig-adelie-scatter indicates that these assumptions are...


# Discussion {#sec-discussion}

How does this analysis answer my big question?

What are some of the strengths and weaknesses of my analysis?

What would I do next? What data do I want to collect? What other questions could I explore?


# References
